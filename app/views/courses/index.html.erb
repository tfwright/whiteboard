<style>
  tr.inactive {
    display:none;
    background-image:url(/images/diagonal.png);
  }
  
  table#course-listing a {
    color:#000;
  }
  
  a.course-link {
    padding-left:10px;
    font-weight:bold; 
  }
</style>
<h1>Active courses</h1>

<table id="course-listing">
  <tr>
    <th>Title</th>
    <th>Start date</th>
    <th>End date</th>
    <th>Students</th>
    <% if %(Admin Professor).include?(current_user.type) %>
      <th>Manage</th>
    <% end %>
  </tr>

<% (@courses.select(&:active?)+@courses.reject(&:active?)).each do |course| %>
  <tr class="<%= !course.active? ? 'inactive' : nil %>">
    <td><%= link_to course.title, course, :class => "course-link" %></td>
    <td><%= course.begins_on %></td>
    <td><%= course.ends_on %></td>
    <td><%= link_to course.students.count, course_students_path(course) %>
    <% if %(Admin Professor).include?(current_user.type) %>
      <td>
        <%= link_to edit_course_path(course), :class => "grey-button pcb" do %>
          <span>Edit</span>
        <% end %>
        <%= link_to course_path(course), :method => :delete, :confirm => "Are you sure you want to delete this course?  This cannot be undone!", :class => "red-button pcb" do %>
          <span>Delete</span>
        <% end %>
      </td>
    <% end %>
  </tr>
<% end %>

</table>

<p align="center"><%= link_to_function "Show all courses", "$('tr.inactive').toggle(); $(this).text(($(this).text() == 'Show all courses') ? 'Show active courses' : 'Show all courses');" %></p>

<br />

<% if %(Admin Professor).include?(current_user.type) %>
  <%= link_to new_course_path, :class => "green-button pcb" do %>
    <span>New Course</span>
  <% end %>
<% end %>
